<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
           Docs
        </a>
         (91% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/davidask/Futures">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html"> Reference</a>
      <img class="carat" src="img/carat.png" />
        Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Future.html">Future</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/FutureObserver.html">FutureObserver</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/DispatchQueue.html">DispatchQueue</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:7Futures7promise_2on_AA6FutureCyxGxm_So17OS_dispatch_queueCyys6ResultOyxs5Error_pGcKctlF">promise(_:on:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:7Futures7promise2on_AA6FutureCyxGSo17OS_dispatch_queueC_xyKctlF">promise(on:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/AnyFuture.html">AnyFuture</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/AnyFutureObserver.html">AnyFutureObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PromisesExtended.html">PromisesExtended</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Promise.html">Promise</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Promises.html">Promises</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='futures' class='heading'>Futures</h1>

<p><img src="https://github.com/davidask/Futures/workflows/Tests/badge.svg" alt="Tests"></p>

<p>Futures is a cross-platform framework for simplifying asynchronous programming, written in Swift. It&rsquo;s lightweight, fast, and easy to understand.</p>
<h3 id='supported-platforms' class='heading'>Supported Platforms</h3>

<ul>
<li>Ubuntu 14.04</li>
<li>macOS 10.9</li>
<li>tvOS 9.0</li>
<li>iOS 8.0</li>
<li>watchOS 2.0</li>
</ul>
<h3 id='architecture' class='heading'>Architecture</h3>

<p>Fundamentally, Futures is a very simple framework, that consists of two types:</p>

<ul>
<li><code><a href="Structs/Promise.html">Promise</a></code>, a single assignment container producing a <code><a href="Classes/Future.html">Future</a></code></li>
<li><code><a href="Classes/Future.html">Future</a></code>, a read-only container resolving into either a value, or an error</li>
</ul>

<p>In many promise frameworks, a promise is undistinguished from a future. This introduces mutability of a promise that gets passed around. In Futures, a <code><a href="Classes/Future.html">Future</a></code> is the observable value while a <code><a href="Structs/Promise.html">Promise</a></code> is the function that sets the value.</p>

<p>Futures are observed, by default, on a single concurrent dispatch queue. This queue can be modified by assigning a different queue to <code><a href="Extensions/DispatchQueue.html#/s:So17OS_dispatch_queueC7FuturesE7futuresABvpZ">DispatchQueue.futures</a></code>. You can also specify a queue of your choice to each callback added to a future .</p>

<p>A future is regarded as:</p>

<ul>
<li><code>resolved</code>, if its value is set</li>
<li><code>fulfilled</code>, if the value is set, and successful</li>
<li><code>rejected</code>, if the value is set, and a failure (error)</li>
</ul>
<h2 id='usage' class='heading'>Usage</h2>

<p>When a function returns a <code><a href="Classes/Future.html">Future&lt;Value&gt;</a></code>, you can either decide to observe it directly, or continue with more asynchronous tasks. For observing, you use:</p>

<ul>
<li><code>whenResolved</code>, if you&rsquo;re interested in both a value and a rejection error</li>
<li><code>whenFulfilled</code>, if you only care about the values</li>
<li><code>whenRejected</code>, if you only care about the error</li>
</ul>

<p>If you have more asynchronous work to do based on the result of the first future, you can use</p>

<ul>
<li><code>flatMap()</code>, to execute another future based on the result of the current one</li>
<li><code>flatMapIfRejected()</code>, to recover from a potential error resulting from the current future</li>
<li><code>flatMapThrowing()</code>, to transform the fulfilled value of the current future or return a rejected future</li>
<li><code>map()</code>, to transform the fulfilled value of the current future</li>
<li><code>recover()</code>,to transform a rejected future into a fulfilled future</li>
<li><code>always()</code>, to execute a <code>Void</code> returning closure regardless of whether the current future is rejected or resolved</li>
<li><code>and()</code>, to combine the result of two futures into a single tuple</li>
<li><code>Future&lt;T&gt;.reduce()</code>, to combine the result of multiple futures into a single future</li>
</ul>

<p>Note that you can specify an observation dispatch queue for all these functions. For instance, you can use <code>flatMap(on: .main)</code>, or <code>.map(on: .global())</code>. By default, the queue is <code><a href="Extensions/DispatchQueue.html#/s:So17OS_dispatch_queueC7FuturesE7futuresABvpZ">DispatchQueue.futures</a></code>.</p>

<p>As a simple example, this is how some code may look:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">future</span> <span class="o">=</span> <span class="nf">loadNetworkResource</span><span class="p">(</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="s">"http://someHost/resource"</span><span class="p">)</span><span class="o">!</span>
<span class="p">)</span><span class="o">.</span><span class="n">flatMapThrowing</span> <span class="p">{</span> <span class="n">data</span> <span class="k">in</span>
    <span class="k">try</span> <span class="n">jsonDecoder</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">SomeType</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
<span class="p">}</span><span class="o">.</span><span class="n">always</span> <span class="p">{</span>
    <span class="nf">someFunctionToExecuteRegardless</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">future</span><span class="o">.</span><span class="nf">whenFulfilled</span><span class="p">(</span><span class="nv">on</span><span class="p">:</span> <span class="o">.</span><span class="n">main</span><span class="p">)</span> <span class="p">{</span> <span class="n">someType</span> <span class="k">in</span>
    <span class="c1">// Success</span>
<span class="p">}</span>

<span class="n">future</span><span class="o">.</span><span class="nf">whenRejected</span><span class="p">(</span><span class="nv">on</span><span class="p">:</span> <span class="o">.</span><span class="n">main</span><span class="p">)</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="c1">// Error</span>
<span class="p">}</span>
</code></pre>

<p>To create your functions returning a <code><a href="Classes/Future.html">Future&lt;T&gt;</a></code>, you create a new pending promise, and resolve it when appropriate.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">performAsynchronousWork</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Future</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">promise</span> <span class="o">=</span> <span class="kt">Promise</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">()</span>

    <span class="kt">DispatchQueue</span><span class="o">.</span><span class="nf">global</span><span class="p">()</span><span class="o">.</span><span class="n">async</span> <span class="p">{</span>
        <span class="n">promise</span><span class="o">.</span><span class="nf">fulfill</span><span class="p">(</span><span class="n">someString</span><span class="p">)</span>

        <span class="c1">// If error</span>
        <span class="n">promise</span><span class="o">.</span><span class="nf">reject</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">promise</span><span class="o">.</span><span class="n">future</span>
<span class="p">}</span>
</code></pre>

<p>You can also use shorthands.</p>
<pre class="highlight swift"><code><span class="n">promise</span> <span class="p">{</span>
     <span class="k">try</span> <span class="n">jsonDecoder</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">SomeType</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
<span class="p">}</span> <span class="c1">// Future&lt;SomeType&gt;</span>
</code></pre>

<p>Or shorthands which you can return from asynchronously.</p>
<pre class="highlight swift"><code><span class="nf">promise</span><span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
    <span class="c1">/// ... on success ...</span>
    <span class="nf">completion</span><span class="p">(</span><span class="o">.</span><span class="nf">fulfill</span><span class="p">(</span><span class="s">"Some string"</span><span class="p">))</span>
    <span class="c1">/// ... if error ...</span>
    <span class="nf">completion</span><span class="p">(</span><span class="o">.</span><span class="nf">reject</span><span class="p">(</span><span class="n">anError</span><span class="p">))</span>
<span class="p">}</span> <span class="c1">// Future&lt;String&gt;</span>
</code></pre>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>The complete documentation can be found <a href="https://davidask.github.io/Futures/">here</a>.</p>
<h2 id='getting-started' class='heading'>Getting started</h2>

<p>Futures can be added to your project either using <a href="https://github.com/Carthage/Carthage">Carthage</a> or Swift package manager.</p>

<p>If you want to depend on Futures in your project, it&rsquo;s as simple as adding a <code>dependencies</code> clause to your <code>Package.swift</code>:</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/davidask/Futures.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"1.6.0"</span><span class="p">)</span>
<span class="p">]</span>
</code></pre>

<p>Or, add a dependency in your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "davidask/Futures"
</code></pre>

<p>More details on using Carthage can be found <a href="https://github.com/Carthage/Carthage#quick-start">here</a>.</p>

<p>Lastly, import the module in your Swift files</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Futures</span>
</code></pre>
<h2 id='contribute' class='heading'>Contribute</h2>

<p>Please feel welcome contributing to <strong>Futures</strong>, check the <code>LICENSE</code> file for more info.</p>
<h2 id='credits' class='heading'>Credits</h2>

<p>David Ask</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="" target="_blank" rel="external">David Ask</a>. All rights reserved. (Last updated: 2020-06-02)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
